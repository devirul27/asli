(function(){var b=(typeof console!=="undefined")?function(f){console.log("Readability: "+f)}:function(){};var e={version:"1.7.1",emailSrc:"http://lab.arc90.com/experiments/readability/email.php",iframeLoads:0,convertLinksToFootnotes:false,reversePageScroll:false,frameHack:false,biggestFrame:false,bodyCache:null,flags:1|2|4,FLAG_STRIP_UNLIKELYS:1,FLAG_WEIGHT_CLASSES:2,FLAG_CLEAN_CONDITIONALLY:4,maxPages:30,parsedPages:{},pageETags:{},document:null,regexps:{unlikelyCandidates:/combx|comment|community|disqus|extra|foot|header|menu|remark|rss|shoutbox|sidebar|sponsor|ad-break|agegate|pagination|pager|popup|tweet|twitter|^ad_|_ad_|hide|hidden|related|^ad$|^ads^/i,okMaybeItsACandidate:/and|article|body|column|main|shadow/i,positive:/article|body|content|entry|hentry|main|page|pagination|post|text|blog|story/i,negative:/combx|comment|com-|contact|foot|footer|footnote|masthead|media|meta|outbrain|promo|related|scroll|shoutbox|sidebar|sponsor|shopping|tags|tool|widget|hidden/i,extraneous:/print|archive|comment|discuss|e[\-]?mail|share|reply|all|login|sign|single/i,divToPElements:/<(a|blockquote|dl|div|img|ol|p|pre|table|ul)/i,replaceBrs:/(<br[^>]*>[ \n\r\t]*){2,}/gi,replaceFonts:/<(\/?)font[^>]*>/gi,trim:/^\s+|\s+$/g,normalize:/\s{2,}/g,killBreaks:/(<br\s*\/?>(\s|&nbsp;?)*){1,}/g,videos:/http:\/\/(www\.)?(youtube|vimeo)\.com/i,skipFootnoteLink:/^\s*(\[?[a-z0-9]{1,2}\]?|^|edit|citation needed)\s*$/i,nextLink:/(next|weiter|continue|>([^\|]|$)|В»([^\|]|$))/i,prevLink:/(prev|earl|old|new|<|В«)/i},init:function(k){e.document=k;e.removeScripts(k);if(k.body&&!e.bodyCache){e.bodyCache=k.body.innerHTML}var i;e.prepDocument(k);var h=k.createElement("DIV");var f=k.createElement("DIV");var g=e.getArticleTitle(k);var n=e.grabArticle(null,k);var j=e.getArticleFooter(k);if(!n){n=k.createElement("DIV");n.id="readability-content";n.innerHTML=["<p>Sorry, there's not enough contiguous content in this page.</p>",(e.frameHack?"<p><strong>It appears this page uses frames.</strong> Unfortunately, browser security properties often cause the fail on pages that include frames.</p>":"")].join("");i=null}h.id="readOverlay";f.id="readInner";f.appendChild(g);var m=k.createElement("hr");m.size=2;f.appendChild(m);f.appendChild(n);f.appendChild(j);h.appendChild(f);k.body.innerHTML="";k.body.insertBefore(h,k.body.firstChild);k.body.removeAttribute("style");if(e.frameHack){var l=k.getElementById("readOverlay");l.style.height="100%";l.style.overflow="auto"}e.postProcessContent(n)},postProcessContent:function(f){e.fixImageFloats(f)},fixImageFloats:function(j){var h=Math.min(j.offsetWidth,800)*0.55,f=j.getElementsByTagName("img");for(var k=0,g=f.length;k<g;k+=1){var l=f[k];if(l.offsetWidth>h){l.className+=" blockImage"}}},getSuggestedDirection:function(i){function h(){return i.replace(/@\w+/,"")}function f(j){var k=i.match(new RegExp(j,"g"));return k!==null?k.length:0}function g(){var k=f("[\\u05B0-\\u05F4\\uFB1D-\\uFBF4]");var j=f("[\\u060C-\\u06FE\\uFB50-\\uFEFC]");return(k+j)*100/i.length>20}i=h(i);return g()?"rtl":"ltr"},getArticleTitle:function(g){var k="",h="";try{k=h=g.title;if(typeof k!=="string"){k=h=e.getInnerText(g.getElementsByTagName("title")[0])}}catch(j){}if(k.match(/ [\|\-] /)){k=h.replace(/(.*)[\|\-] .*/gi,"$1");if(k.split(" ").length<3){k=h.replace(/[^\|\-]*[\|\-](.*)/gi,"$1")}}else{if(k.indexOf(": ")!==-1){k=h.replace(/.*:(.*)/gi,"$1");if(k.split(" ").length<3){k=h.replace(/[^:]*[:](.*)/gi,"$1")}}else{if(k.length>150||k.length<15){var f=g.getElementsByTagName("h1");if(f.length===1){k=e.getInnerText(f[0])}}}}k=k.replace(e.regexps.trim,"");if(k.split(" ").length<=4){k=h}var i=g.createElement("H2");i.innerHTML=k;return i},getArticleFooter:function(f){var g=f.createElement("DIV");g.id="readFooter";g.innerHTML="";return g},prepDocument:function(s){if(s.body===null){var p=s.createElement("body");try{s.body=p}catch(q){s.documentElement.appendChild(p);b(q)}}s.body.id="readabilityBody";var r=s.getElementsByTagName("frame");if(r.length>0){var i=null;var v=0;var n=0;for(var h=0;h<r.length;h+=1){var m=r[h].offsetWidth+r[h].offsetHeight;var t=false;try{var u=r[h].contentWindow.document.body;t=true}catch(o){b(o)}if(m>n){n=m;e.biggestFrame=r[h]}if(t&&m>v){e.frameHack=true;i=r[h];v=m}}if(i){var f=s.createElement("body");f.innerHTML=i.contentWindow.document.body.innerHTML;f.style.overflow="scroll";s.body=f;var l=s.getElementsByTagName("frameset")[0];if(l){l.parentNode.removeChild(l)}}}for(var j=0;j<s.styleSheets.length;j+=1){if(s.styleSheets[j].href!==null&&s.styleSheets[j].href.lastIndexOf("readability")===-1){s.styleSheets[j].disabled=true}}var g=s.getElementsByTagName("style");for(var w=0;w<g.length;w+=1){g[w].textContent=""}s.body.innerHTML=s.body.innerHTML.replace(e.regexps.replaceBrs,"</p><p>").replace(e.regexps.replaceFonts,"<$1span>")},addFootnotes:function(v,r){var t=r.getElementById("readability-footnotes"),g=r.getElementById("readability-footnotes-list");if(!t){t=r.createElement("DIV");t.id="readability-footnotes";t.innerHTML="<h3>References</h3>";t.style.display="none";g=r.createElement("ol");g.id="readability-footnotes-list";t.appendChild(g);var j=r.getElementById("readFooter");if(j){j.parentNode.insertBefore(t,j)}}var n=v.getElementsByTagName("a");var s=g.getElementsByTagName("li").length;for(var l=0;l<n.length;l+=1){var u=n[l],m=u.cloneNode(true),f=r.createElement("a"),p=r.createElement("li"),q=m.host?m.host:r.location.host,h=e.getInnerText(u);if(u.className&&u.className.indexOf("readability-DoNotFootnote")!==-1||h.match(e.regexps.skipFootnoteLink)){continue}s+=1;f.href="#readabilityFootnoteLink-"+s;f.innerHTML="<small><sup>["+s+"]</sup></small>";f.className="readability-DoNotFootnote";try{f.style.color="inherit"}catch(o){}if(u.parentNode.lastChild===u){u.parentNode.appendChild(f)}else{u.parentNode.insertBefore(f,u.nextSibling)}u.name="readabilityLink-"+s;try{u.style.color="inherit"}catch(k){}p.innerHTML="<small><sup><a href='#readabilityLink-"+s+"' title='Jump to Link in Article'>^</a></sup></small> ";m.innerHTML=(m.title?m.title:h);m.name="readabilityFootnoteLink-"+s;p.appendChild(m);p.innerHTML=p.innerHTML+"<small> ("+q+")</small>";g.appendChild(p)}if(s>0){t.style.display="block"}},prepArticle:function(g){e.cleanStyles(g);e.killBreaks(g);e.cleanConditionally(g,"form");e.clean(g,"object");e.clean(g,"h1");if(g.getElementsByTagName("h2").length===1){e.clean(g,"h2")}e.clean(g,"iframe");e.cleanHeaders(g);e.cleanConditionally(g,"table");e.cleanConditionally(g,"ul");e.cleanConditionally(g,"div");var l=g.getElementsByTagName("p");for(var j=l.length-1;j>=0;j-=1){var h=l[j].getElementsByTagName("img").length;var k=l[j].getElementsByTagName("embed").length;var f=l[j].getElementsByTagName("object").length;if(h===0&&k===0&&f===0&&e.getInnerText(l[j],false)===""){l[j].parentNode.removeChild(l[j])}}try{g.innerHTML=g.innerHTML.replace(/<br[^>]*>\s*<p/gi,"<p")}catch(m){b("Cleaning innerHTML of breaks failed. This is an IE strict-block-elements bug. Ignoring.: "+m)}},initializeNode:function(f){f.readability={contentScore:0};switch(f.tagName){case"DIV":f.readability.contentScore+=5;break;case"PRE":case"TD":case"BLOCKQUOTE":f.readability.contentScore+=3;break;case"ADDRESS":case"OL":case"UL":case"DL":case"DD":case"DT":case"LI":case"FORM":f.readability.contentScore-=3;break;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"TH":f.readability.contentScore-=5;break}f.readability.contentScore+=e.getClassWeight(f)},grabArticle:function(h,j){var g=e.flagIsActive(e.FLAG_STRIP_UNLIKELYS),t=(h!==null)?true:false;h=h?h:j.body;var y=h.innerHTML;var w=h.getElementsByTagName("*");var D=null;var N=[];for(var o=0;(D=w[o]);o+=1){if(g){var G=D.className+D.id;if((G.search(e.regexps.unlikelyCandidates)!==-1&&G.search(e.regexps.okMaybeItsACandidate)===-1&&D.tagName!=="BODY")){b("Removing unlikely candidate - "+G);D.parentNode.removeChild(D);o-=1;continue}}if(D.tagName==="P"||D.tagName==="TD"||D.tagName==="PRE"){N[N.length]=D}if(D.tagName==="DIV"){if(D.innerHTML.search(e.regexps.divToPElements)===-1){var m=j.createElement("p");try{m.innerHTML=D.innerHTML;D.parentNode.replaceChild(m,D);o-=1;N[N.length]=D}catch(Q){b("Could not alter div to p, probably an IE restriction, reverting back to div.: "+Q)}}else{for(var P=0,B=D.childNodes.length;P<B;P+=1){var u=D.childNodes[P];if(u.nodeType===3){var L=j.createElement("p");L.innerHTML=u.nodeValue;L.style.display="inline";L.className="readability-styled";u.parentNode.replaceChild(L,u)}}}}}var K=[];for(var k=0;k<N.length;k+=1){var l=N[k].parentNode;var F=l?l.parentNode:null;var S=e.getInnerText(N[k]);if(!l||typeof(l.tagName)==="undefined"){continue}if(S.length<25){continue}if(typeof l.readability==="undefined"){e.initializeNode(l);K.push(l)}if(F&&typeof(F.readability)==="undefined"&&typeof(F.tagName)!=="undefined"){e.initializeNode(F);K.push(F)}var R=0;R+=1;R+=S.split(",").length;R+=Math.min(Math.floor(S.length/100),3);l.readability.contentScore+=R;if(F){F.readability.contentScore+=R/2}}var v=null;for(var T=0,z=K.length;T<z;T+=1){K[T].readability.contentScore=K[T].readability.contentScore*(1-e.getLinkDensity(K[T]));b("Candidate: "+K[T]+" ("+K[T].className+":"+K[T].id+") with score "+K[T].readability.contentScore);if(!v||K[T].readability.contentScore>v.readability.contentScore){v=K[T]}}if(v===null||v.tagName==="BODY"){v=j.createElement("DIV");v.innerHTML=h.innerHTML;h.innerHTML="";h.appendChild(v);e.initializeNode(v)}var E=j.createElement("DIV");if(t){E.id="readability-content"}var O=Math.max(10,v.readability.contentScore*0.2);var n=v.parentNode.childNodes;for(var J=0,r=n.length;J<r;J+=1){var A=n[J];var H=false;if(!A){continue}b("Looking at sibling node: "+A+" ("+A.className+":"+A.id+")"+((typeof A.readability!=="undefined")?(" with score "+A.readability.contentScore):""));b("Sibling has score "+(A.readability?A.readability.contentScore:"Unknown"));if(A===v){H=true}var x=0;if(A.className===v.className&&v.className!==""){x+=v.readability.contentScore*0.2}if(typeof A.readability!=="undefined"&&(A.readability.contentScore+x)>=O){H=true}if(A.nodeName==="P"){var q=e.getLinkDensity(A);var I=e.getInnerText(A);var f=I.length;if(f>80&&q<0.25){H=true}else{if(f<80&&q===0&&I.search(/\.( |$)/)!==-1){H=true}}}if(H){b("Appending node: "+A);var C=null;if(A.nodeName!=="DIV"&&A.nodeName!=="P"){b("Altering siblingNode of "+A.nodeName+" to div.");C=j.createElement("DIV");try{C.id=A.id;C.innerHTML=A.innerHTML}catch(M){b("Could not alter siblingNode to div, probably an IE restriction, reverting back to original.");C=A;J-=1;r-=1}}else{C=A;J-=1;r-=1}C.className="";E.appendChild(C)}}e.prepArticle(E);if(e.curPageNum===1){E.innerHTML='<div id="readability-page-1" class="page">'+E.innerHTML+"</div>"}if(e.getInnerText(E,false).length<250){h.innerHTML=y;if(e.flagIsActive(e.FLAG_STRIP_UNLIKELYS)){e.removeFlag(e.FLAG_STRIP_UNLIKELYS);return e.grabArticle(h,j)}else{if(e.flagIsActive(e.FLAG_WEIGHT_CLASSES)){e.removeFlag(e.FLAG_WEIGHT_CLASSES);return e.grabArticle(h,j)}else{if(e.flagIsActive(e.FLAG_CLEAN_CONDITIONALLY)){e.removeFlag(e.FLAG_CLEAN_CONDITIONALLY);return e.grabArticle(h,j)}else{return null}}}}return E},removeScripts:function(h){var f=h.getElementsByTagName("script");for(var g=f.length-1;g>=0;g-=1){if(typeof(f[g].src)==="undefined"||(f[g].src.indexOf("readability")===-1&&f[g].src.indexOf("typekit")===-1)){f[g].nodeValue="";f[g].removeAttribute("src");if(f[g].parentNode){f[g].parentNode.removeChild(f[g])}}}},getInnerText:function(h,f){var g="";if(typeof(h.textContent)==="undefined"&&typeof(h.innerText)==="undefined"){return""}f=(typeof f==="undefined")?true:f;g=h.textContent.replace(e.regexps.trim,"");if(f){return g.replace(e.regexps.normalize," ")}else{return g}},getCharCount:function(g,f){f=f||",";return e.getInnerText(g).split(f).length-1},cleanStyles:function(g,f){g=g||f;var h=g.firstChild;if(!g){return}if(typeof g.removeAttribute==="function"&&g.className!=="readability-styled"){g.removeAttribute("style")}while(h!==null){if(h.nodeType===1){if(h.className!=="readability-styled"){h.removeAttribute("style")}e.cleanStyles(h,f)}h=h.nextSibling}},getLinkDensity:function(l){var g=l.getElementsByTagName("a");var j=e.getInnerText(l).length;var k=0;for(var h=0,f=g.length;h<f;h+=1){k+=e.getInnerText(g[h]).length}return k/j},curPageNum:1,getClassWeight:function(g){if(!e.flagIsActive(e.FLAG_WEIGHT_CLASSES)){return 0}var f=0;if(typeof(g.className)==="string"&&g.className!==""){if(g.className.search(e.regexps.negative)!==-1){f-=25}if(g.className.search(e.regexps.positive)!==-1){f+=25}}if(typeof(g.id)==="string"&&g.id!==""){if(g.id.search(e.regexps.negative)!==-1){f-=25}if(g.id.search(e.regexps.positive)!==-1){f+=25}}return f},nodeIsVisible:function(f){return(f.offsetWidth!==0||f.offsetHeight!==0)&&f.style.display.toLowerCase()!=="none"},killBreaks:function(g){try{g.innerHTML=g.innerHTML.replace(e.regexps.killBreaks,"<br />")}catch(f){b("KillBreaks failed - this is an IE bug. Ignoring.: "+f)}},clean:function(l,f){var m=l.getElementsByTagName(f);var g=(f==="object"||f==="embed");for(var n=m.length-1;n>=0;n-=1){if(g){var k="";for(var j=0,h=m[n].attributes.length;j<h;j+=1){k+=m[n].attributes[j].value+"|"}if(k.search(e.regexps.videos)!==-1){continue}if(m[n].innerHTML.search(e.regexps.videos)!==-1){continue}}m[n].parentNode.removeChild(m[n])}},cleanConditionally:function(w,x){if(!e.flagIsActive(e.FLAG_CLEAN_CONDITIONALLY)){return}var g=w.getElementsByTagName(x);var r=g.length;for(var v=r-1;v>=0;v-=1){var n=e.getClassWeight(g[v]);var u=(typeof g[v].readability!=="undefined")?g[v].readability.contentScore:0;b("Cleaning Conditionally "+g[v]+" ("+g[v].className+":"+g[v].id+")"+((typeof g[v].readability!=="undefined")?(" with score "+g[v].readability.contentScore):""));if(n+u<0){g[v].parentNode.removeChild(g[v])}else{if(e.getCharCount(g[v],",")<10){var q=g[v].getElementsByTagName("p").length;var y=g[v].getElementsByTagName("img").length;var o=g[v].getElementsByTagName("li").length-100;var l=g[v].getElementsByTagName("input").length;var k=0;var t=g[v].getElementsByTagName("embed");for(var f=0,j=t.length;f<j;f+=1){if(t[f].src.search(e.regexps.videos)===-1){k+=1}}var m=e.getLinkDensity(g[v]);var h=e.getInnerText(g[v]).length;var s=false;if(y>q){s=true}else{if(o>q&&x!=="ul"&&x!=="ol"){s=true}else{if(l>Math.floor(q/3)){s=true}else{if(h<25&&(y===0||y>2)){s=true}else{if(n<25&&m>0.2){s=true}else{if(n>=25&&m>0.5){s=true}else{if((k===1&&h<75)||k>1){s=true}}}}}}}if(s){g[v].parentNode.removeChild(g[v])}}}}},cleanHeaders:function(h){for(var f=1;f<3;f+=1){var j=h.getElementsByTagName("h"+f);for(var g=j.length-1;g>=0;g-=1){if(e.getClassWeight(j[g])<0||e.getLinkDensity(j[g])>0.33){j[g].parentNode.removeChild(j[g])}}}},curScrollStep:0,htmlspecialchars:function(f){if(typeof(f)==="string"){f=f.replace(/&/g,"&amp;");f=f.replace(/"/g,"&quot;");f=f.replace(/'/g,"&#039;");f=f.replace(/</g,"&lt;");f=f.replace(/>/g,"&gt;")}return f},flagIsActive:function(f){return(e.flags&f)>0},addFlag:function(f){e.flags=e.flags|f},removeFlag:function(f){e.flags=e.flags&~f}};var d=false;function a(){window.location.reload()}function c(){e.init(document);d=true}window.togglePageReadability=function(){d?a():c()}})();